<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./index.css">
  </head>
  <body>
    <label>Seitenpfad</label>
    <strong id="DataPath"></label>
    <input type="button" id="DataPathInput" value="Ordner wählen" />
  </br>
  <div class="Controls">
    <label>Link</label>
    <input type="text" id="Link" />
    <label>Name</label>
    <input type="text" id="Name" />
    <input type="button" onclick="Save()" value="Hinzufügen"/>
    <input type="button" onclick="Compare()" value="Vergleichen" class="Compare"/>
  </div>
    <div class="Content">
      <table class="MainTable" id="MainTable">
        <tr>
          <th>Name</th>
          <th>Website</th>
          <th>Änderung?</th>
        </tr>
      </table>
  </div>
  </body>
  <script>
  var $ = require('jquery');
  const {ipcRenderer} = require('electron')
  $('#DataPathInput').click(function(){
    ipcRenderer.send('update-config');
    $('#Controls').attr("display", "block");
  })
  ipcRenderer.send('init');
  ipcRenderer.on('SetPath', (event, path) => {
  $('#Datapath').text(path);
  })
  ipcRenderer.on('update-false', (event, cell) =>{
    console.log(cell);
    var selectedcell = document.getElementById(cell);
    selectedcell.innerHTML = "Keine Änderungen";
    selectedcell.class = "negativ-cell";

  })
  ipcRenderer.on('update-true', (event, cell) =>{
    var selectedcell = document.getElementById(cell);
    selectedcell.innerHTML = "Änderung!";
    selectedcell.class = "positiv-cell";
  })
  ipcRenderer.on('page', (event, page) => {
    console.log(page);
    var table = document.getElementById('MainTable')
    var newrow = table.insertRow(table.rows.length)
    var NameCell = newrow.insertCell(0)
    var LinkCell = newrow.insertCell(1)
    var ChangesCell = newrow.insertCell(2)
    NameCell.innerHTML = page.Name;
    LinkCell.innerHTML = page.URL;
    if(page.Changes){
      ChangesCell.innerHTML = page.Changes;
      ChangesCell.id = page.Name + "-changescell";
    } else {
      ChangesCell.innerHTML = "Neu";
      ChangesCell.id = page.Name + "-changescell";
    }
  })
  function Compare(){
    ipcRenderer.send('compare');
  }
  function Save(){
    var info = {};
    info.URL = $('#Link').val();
    info.Name = $('#Name').val();
    ipcRenderer.send('save', info);
  }
  </script>
</html>
